<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Mini Project #2</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="mp02_files/libs/clipboard/clipboard.min.js"></script>
<script src="mp02_files/libs/quarto-html/quarto.js"></script>
<script src="mp02_files/libs/quarto-html/popper.min.js"></script>
<script src="mp02_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="mp02_files/libs/quarto-html/anchor.min.js"></script>
<link href="mp02_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="mp02_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="mp02_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="mp02_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="mp02_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<link href="mp02_files/libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="mp02_files/libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<link href="mp02_files/libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="mp02_files/libs/datatables-binding-0.33/datatables.js"></script>
<script src="mp02_files/libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="mp02_files/libs/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="mp02_files/libs/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="mp02_files/libs/dt-core-1.13.6/js/jquery.dataTables.min.js"></script>
<link href="mp02_files/libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">
<script src="mp02_files/libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Mini Project #2</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="what-makes-a-successful-movie" class="level1">
<h1>What Makes a Successful Movie?</h1>
<p>In this project we are taking a deep dive into the realm of IMDB to find what movies are highly rated and successful. Afterwards we are going to based on our analysis create a movie pitch for a brand new remake that will blow Hollywood execs out of the water.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">dplyr.summarise.inform =</span> <span class="cn">FALSE</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DT)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>get_imdb_file <span class="ot">&lt;-</span> <span class="cf">function</span>(fname){</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>  BASE_URL <span class="ot">&lt;-</span> <span class="st">"https://datasets.imdbws.com/"</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>  fname_ext <span class="ot">&lt;-</span> <span class="fu">paste0</span>(fname, <span class="st">".tsv.gz"</span>)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="sc">!</span><span class="fu">file.exists</span>(fname_ext)){</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>    FILE_URL <span class="ot">&lt;-</span> <span class="fu">paste0</span>(BASE_URL, fname_ext)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">download.file</span>(FILE_URL, </span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>                  <span class="at">destfile =</span> fname_ext)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>(readr<span class="sc">::</span><span class="fu">read_tsv</span>(fname_ext, <span class="at">lazy=</span><span class="cn">FALSE</span>))</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>NAME_BASICS      <span class="ot">&lt;-</span> <span class="fu">get_imdb_file</span>(<span class="st">"name.basics"</span>)</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>TITLE_BASICS     <span class="ot">&lt;-</span> <span class="fu">get_imdb_file</span>(<span class="st">"title.basics"</span>)</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>TITLE_EPISODES   <span class="ot">&lt;-</span> <span class="fu">get_imdb_file</span>(<span class="st">"title.episode"</span>)</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>TITLE_RATINGS    <span class="ot">&lt;-</span> <span class="fu">get_imdb_file</span>(<span class="st">"title.ratings"</span>)</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>TITLE_CREW       <span class="ot">&lt;-</span> <span class="fu">get_imdb_file</span>(<span class="st">"title.crew"</span>)</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>TITLE_PRINCIPALS <span class="ot">&lt;-</span> <span class="fu">get_imdb_file</span>(<span class="st">"title.principals"</span>)</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a><span class="co">#Data Sub-Sampling</span></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>NAME_BASICS <span class="ot">&lt;-</span> NAME_BASICS <span class="sc">|&gt;</span> </span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_count</span>(knownForTitles, <span class="st">","</span>) <span class="sc">&gt;</span> <span class="dv">1</span>)</span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>TITLE_RATINGS <span class="sc">|&gt;</span></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>numVotes)) <span class="sc">+</span> </span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins=</span><span class="dv">30</span>) <span class="sc">+</span></span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Number of IMDB Ratings"</span>) <span class="sc">+</span> </span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Number of Titles"</span>) <span class="sc">+</span> </span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Majority of IMDB Titles Have Less than 100 Ratings"</span>) <span class="sc">+</span> </span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span> </span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>(<span class="at">label=</span>scales<span class="sc">::</span>comma) <span class="sc">+</span> </span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">label=</span>scales<span class="sc">::</span>comma)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>TITLE_RATINGS <span class="sc">|&gt;</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(numVotes) <span class="sc">|&gt;</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">quantile</span>()</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>TITLE_RATINGS <span class="ot">&lt;-</span> TITLE_RATINGS <span class="sc">|&gt;</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(numVotes <span class="sc">&gt;=</span> <span class="dv">100</span>)</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>TITLE_BASICS <span class="ot">&lt;-</span> TITLE_BASICS <span class="sc">|&gt;</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">semi_join</span>(TITLE_RATINGS, </span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>            <span class="fu">join_by</span>(tconst <span class="sc">==</span> tconst))</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>TITLE_CREW <span class="ot">&lt;-</span> TITLE_CREW <span class="sc">|&gt;</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">semi_join</span>(TITLE_RATINGS, </span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>            <span class="fu">join_by</span>(tconst <span class="sc">==</span> tconst))</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>TITLE_EPISODES_1 <span class="ot">&lt;-</span> TITLE_EPISODES <span class="sc">|&gt;</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">semi_join</span>(TITLE_RATINGS, </span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>            <span class="fu">join_by</span>(tconst <span class="sc">==</span> tconst))</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>TITLE_EPISODES_2 <span class="ot">&lt;-</span> TITLE_EPISODES <span class="sc">|&gt;</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">semi_join</span>(TITLE_RATINGS, </span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>            <span class="fu">join_by</span>(parentTconst <span class="sc">==</span> tconst))</span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>TITLE_EPISODES <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(TITLE_EPISODES_1,</span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>                            TITLE_EPISODES_2) <span class="sc">|&gt;</span></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>()</span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>TITLE_PRINCIPALS <span class="ot">&lt;-</span> TITLE_PRINCIPALS <span class="sc">|&gt;</span></span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">semi_join</span>(TITLE_RATINGS, <span class="fu">join_by</span>(tconst <span class="sc">==</span> tconst))</span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(TITLE_EPISODES_1)</span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(TITLE_EPISODES_2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<section id="task-1" class="level2">
<h2 class="anchored" data-anchor-id="task-1">Task 1</h2>
<p>Our first task is to ensure that all our tables are clean. To do that we need to convert our tables into the proper variable type, alot of the variables are just chars so we need to fix that.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>NAME_BASICS <span class="ot">&lt;-</span> NAME_BASICS <span class="sc">|&gt;</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">birthYear =</span> <span class="fu">as.numeric</span>(birthYear),</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">deathYear =</span> <span class="fu">as.numeric</span>(deathYear))</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="co">#Task1</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>TITLE_BASICS <span class="ot">&lt;-</span> TITLE_BASICS <span class="sc">|&gt;</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">isAdult =</span> <span class="fu">as.logical</span>(isAdult),</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>         <span class="at">startYear =</span> <span class="fu">as.numeric</span>(startYear),</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>         <span class="at">endYear =</span> <span class="fu">as.numeric</span>(endYear),</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>         <span class="at">runtimeMinutes =</span> <span class="fu">as.numeric</span>(runtimeMinutes))</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>TITLE_CREW <span class="ot">&lt;-</span> TITLE_CREW <span class="sc">|&gt;</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">writers =</span> <span class="fu">ifelse</span>(<span class="fu">str_equal</span>(writers, <span class="st">"</span><span class="sc">\\</span><span class="st">N"</span>), <span class="cn">NA</span>, writers),</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>         <span class="at">directors =</span> <span class="fu">ifelse</span>(<span class="fu">str_equal</span>(writers, <span class="st">"</span><span class="sc">\\</span><span class="st">N"</span>), <span class="cn">NA</span>, directors))</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>TITLE_EPISODES <span class="ot">&lt;-</span> TITLE_EPISODES <span class="sc">|&gt;</span> </span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">seasonNumber =</span> <span class="fu">as.numeric</span>(seasonNumber),</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>         <span class="at">episodeNumber =</span> <span class="fu">as.numeric</span>(episodeNumber))</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>TITLE_PRINCIPALS <span class="ot">&lt;-</span> TITLE_PRINCIPALS <span class="sc">|&gt;</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">category =</span> <span class="fu">ifelse</span>(<span class="fu">str_equal</span>(category, <span class="st">"</span><span class="sc">\\</span><span class="st">N"</span>), <span class="cn">NA</span>, category),</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>         <span class="at">job =</span> <span class="fu">ifelse</span>(<span class="fu">str_equal</span>(job, <span class="st">"</span><span class="sc">\\</span><span class="st">N"</span>), <span class="cn">NA</span>, job),</span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>         <span class="at">characters =</span> <span class="fu">ifelse</span>(<span class="fu">str_equal</span>(characters, <span class="st">"</span><span class="sc">\\</span><span class="st">N"</span>), <span class="cn">NA</span>, characters))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="task-2" class="level2">
<h2 class="anchored" data-anchor-id="task-2">Task 2</h2>
<section id="how-many-movies-are-in-our-data-set-how-many-tv-series-how-many-tv-episodes" class="level3">
<h3 class="anchored" data-anchor-id="how-many-movies-are-in-our-data-set-how-many-tv-series-how-many-tv-episodes">How many movies are in our data set? How many TV series? How many TV episodes?</h3>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>TITLE_BASICS <span class="sc">|&gt;</span> </span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(titleType) <span class="sc">|&gt;</span> </span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span> </span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  DT<span class="sc">::</span><span class="fu">datatable</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-81bf5c4ef11047405bac" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-81bf5c4ef11047405bac">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10"],["movie","short","tvEpisode","tvMiniSeries","tvMovie","tvSeries","tvShort","tvSpecial","video","videoGame"],[113541,14761,125028,4757,13185,24270,338,2527,8695,3943]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>titleType<\/th>\n      <th>n<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":2},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"titleType","targets":1},{"name":"n","targets":2}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>As we see there are 132369 movies, 30043 TV series and 156967 TV episodes in our data set.</p>
</section>
<section id="who-is-the-oldest-living-person-in-our-data-set" class="level3">
<h3 class="anchored" data-anchor-id="who-is-the-oldest-living-person-in-our-data-set">Who is the oldest living person in our data set?</h3>
<p>Because in the dataset NA values are treated for people who haven’t died yer, or have an unknown death date we cant exactly find the answer to this using our dataset. Doing a little research shows that the oldest living actress is Brenda Miller born in 1918.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>NAME_BASICS <span class="sc">|&gt;</span> </span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">is.na</span>(deathYear), birthYear <span class="sc">&gt;</span> <span class="dv">1917</span>) <span class="sc">|&gt;</span> </span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(birthYear) <span class="sc">|&gt;</span> </span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>() <span class="sc">|&gt;</span> </span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>    DT<span class="sc">::</span><span class="fu">datatable</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="there-is-one-tv-episode-in-this-data-set-with-a-perfect-1010-rating-and-at-least-200000-imdb-ratings.-what-is-it-what-series-does-it-belong-to" class="level3">
<h3 class="anchored" data-anchor-id="there-is-one-tv-episode-in-this-data-set-with-a-perfect-1010-rating-and-at-least-200000-imdb-ratings.-what-is-it-what-series-does-it-belong-to">There is one TV Episode in this data set with a perfect 10/10 rating and at least 200,000 IMDb ratings. What is it? What series does it belong to?</h3>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co">#TITLE_RATINGS |&gt; </span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="co">#  filter(numVotes &gt; 200000, averageRating == 10)</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>TITLE_BASICS <span class="sc">|&gt;</span> </span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(tconst <span class="sc">==</span> <span class="st">"tt2301451"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>    DT<span class="sc">::</span><span class="fu">datatable</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-b203621ca2a4837149e3" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-b203621ca2a4837149e3">{"x":{"filter":"none","vertical":false,"data":[["1"],["tt2301451"],["tvEpisode"],["Ozymandias"],["Ozymandias"],[false],[2013],[null],[47],["Crime,Drama,Thriller"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>tconst<\/th>\n      <th>titleType<\/th>\n      <th>primaryTitle<\/th>\n      <th>originalTitle<\/th>\n      <th>isAdult<\/th>\n      <th>startYear<\/th>\n      <th>endYear<\/th>\n      <th>runtimeMinutes<\/th>\n      <th>genres<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[6,7,8]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"tconst","targets":1},{"name":"titleType","targets":2},{"name":"primaryTitle","targets":3},{"name":"originalTitle","targets":4},{"name":"isAdult","targets":5},{"name":"startYear","targets":6},{"name":"endYear","targets":7},{"name":"runtimeMinutes","targets":8},{"name":"genres","targets":9}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>To no surprise for any Breaking Bad fan, the 10/10 episode is Ozymandias from said tv show, Breaking Bad.</p>
</section>
<section id="what-four-projects-is-the-actor-mark-hamill-most-known-for" class="level3">
<h3 class="anchored" data-anchor-id="what-four-projects-is-the-actor-mark-hamill-most-known-for">What four projects is the actor Mark Hamill most known for?</h3>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co">#NAME_BASICS |&gt; </span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="co">#  filter(primaryName == "Mark Hamill")</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>TITLE_BASICS <span class="sc">|&gt;</span> </span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(tconst <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"tt0076759"</span>,<span class="st">"tt2527336"</span>,<span class="st">"tt0080684"</span>,<span class="st">"tt0086190"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    DT<span class="sc">::</span><span class="fu">datatable</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-df81f18b0b049922c4bf" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-df81f18b0b049922c4bf">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4"],["tt0076759","tt0080684","tt0086190","tt2527336"],["movie","movie","movie","movie"],["Star Wars: Episode IV - A New Hope","Star Wars: Episode V - The Empire Strikes Back","Star Wars: Episode VI - Return of the Jedi","Star Wars: Episode VIII - The Last Jedi"],["Star Wars","Star Wars: Episode V - The Empire Strikes Back","Star Wars: Episode VI - Return of the Jedi","Star Wars: Episode VIII - The Last Jedi"],[false,false,false,false],[1977,1980,1983,2017],[null,null,null,null],[121,124,131,152],["Action,Adventure,Fantasy","Action,Adventure,Fantasy","Action,Adventure,Fantasy","Action,Adventure,Fantasy"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>tconst<\/th>\n      <th>titleType<\/th>\n      <th>primaryTitle<\/th>\n      <th>originalTitle<\/th>\n      <th>isAdult<\/th>\n      <th>startYear<\/th>\n      <th>endYear<\/th>\n      <th>runtimeMinutes<\/th>\n      <th>genres<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[6,7,8]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"tconst","targets":1},{"name":"titleType","targets":2},{"name":"primaryTitle","targets":3},{"name":"originalTitle","targets":4},{"name":"isAdult","targets":5},{"name":"startYear","targets":6},{"name":"endYear","targets":7},{"name":"runtimeMinutes","targets":8},{"name":"genres","targets":9}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>No Surprise here, Star Wars episodes IV,V,VI and VIII.</p>
</section>
<section id="what-tv-series-with-more-than-12-episodes-has-the-highest-average-rating" class="level3">
<h3 class="anchored" data-anchor-id="what-tv-series-with-more-than-12-episodes-has-the-highest-average-rating">What TV series, with more than 12 episodes, has the highest <em>average</em> rating?</h3>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>TITLE_RATINGS <span class="sc">|&gt;</span> </span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(tconst <span class="sc">%in%</span> TvSeries<span class="sc">$</span>parentTconst) <span class="sc">|&gt;</span> </span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(tconst) <span class="sc">|&gt;</span> </span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">avgRating =</span> <span class="fu">mean</span>(averageRating)) <span class="sc">|&gt;</span> </span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(avgRating)) <span class="sc">|&gt;</span> </span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>() <span class="sc">|&gt;</span> </span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>  DT<span class="sc">::</span><span class="fu">datatable</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-9db9306c7fe67d72e134" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-9db9306c7fe67d72e134">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6"],["tt23028046","tt15613780","tt7151672","tt8560108","tt8560994","tt10203450"],[9.800000000000001,9.699999999999999,9.699999999999999,9.699999999999999,9.699999999999999,9.6]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>tconst<\/th>\n      <th>avgRating<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":2},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"tconst","targets":1},{"name":"avgRating","targets":2}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="is-it-true-that-episodes-from-later-seasons-of-happy-days-have-lower-average-ratings-than-the-early-seasons" class="level3">
<h3 class="anchored" data-anchor-id="is-it-true-that-episodes-from-later-seasons-of-happy-days-have-lower-average-ratings-than-the-early-seasons">Is it true that episodes from later seasons of <em>Happy Days</em> have lower average ratings than the early seasons?</h3>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>Happy_Days <span class="ot">&lt;-</span> TITLE_EPISODES <span class="sc">|&gt;</span> </span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(parentTconst <span class="sc">==</span> <span class="st">"tt0070992"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(seasonNumber, episodeNumber) <span class="sc">|&gt;</span> </span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">totalEpisodeNum =</span> <span class="fu">row_number</span>())</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>Happy_Days <span class="ot">&lt;-</span> <span class="fu">inner_join</span>(Happy_Days, TITLE_RATINGS, <span class="at">by =</span> <span class="st">"tconst"</span>)</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>Happy_Days <span class="sc">|&gt;</span> </span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(totalEpisodeNum, averageRating)) <span class="sc">+</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>() <span class="sc">+</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mp02_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>It is mostly true that newer the middle of the series run Happy Days steadily dropped off, however by the end of the series it saw some recovery in quality.</p>
</section>
</section>
<section id="task-3" class="level2">
<h2 class="anchored" data-anchor-id="task-3">Task 3</h2>
<p>To quantify the success we need to find some way of measuring success based off of average rating and the number of votes. If we simply multiplied the two, it may unfairly inflate bad movies who simply have a high amount of engagement in voting. However, generally movies with more votes should have a higher weighting, because when comparing two movies with the same average rating, the one with higher votes it is a lot more impressive to hold that rating when the sample size is much larger.</p>
<p>To solve this issue, we will create a metric using log transformation to give some weight to number of votes but not have it dominate the metric.</p>
<p><span class="math display">\[
Success = averageRating * (1 + log_{10}(numVotes))
\]</span></p>
<section id="metric-validation" class="level3">
<h3 class="anchored" data-anchor-id="metric-validation">Metric Validation</h3>
<p>To make sure our metric is accurate, lets check the top movies and see whether they were box offices successus or not.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>TITLE_RATINGS <span class="ot">&lt;-</span> TITLE_RATINGS <span class="sc">|&gt;</span> </span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">success =</span> averageRating <span class="sc">*</span> <span class="dv">1</span><span class="sc">+</span><span class="fu">log10</span>(numVotes))</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>TITLE_BASICS <span class="sc">|&gt;</span> </span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(tconst <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"tt0903747"</span>,<span class="st">"tt0111161"</span>,<span class="st">"tt0944947"</span>,<span class="st">"tt0068646"</span>, <span class="st">"tt0468569"</span>, <span class="st">"tt2301451"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>    DT<span class="sc">::</span><span class="fu">datatable</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-673fba3e2b7badb520ef" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-673fba3e2b7badb520ef">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6"],["tt0068646","tt0111161","tt0468569","tt0903747","tt0944947","tt2301451"],["movie","movie","movie","tvSeries","tvSeries","tvEpisode"],["The Godfather","The Shawshank Redemption","The Dark Knight","Breaking Bad","Game of Thrones","Ozymandias"],["The Godfather","The Shawshank Redemption","The Dark Knight","Breaking Bad","Game of Thrones","Ozymandias"],[false,false,false,false,false,false],[1972,1994,2008,2008,2011,2013],[null,null,null,2013,2019,null],[175,142,152,45,60,47],["Crime,Drama","Drama","Action,Crime,Drama","Crime,Drama,Thriller","Action,Adventure,Drama","Crime,Drama,Thriller"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>tconst<\/th>\n      <th>titleType<\/th>\n      <th>primaryTitle<\/th>\n      <th>originalTitle<\/th>\n      <th>isAdult<\/th>\n      <th>startYear<\/th>\n      <th>endYear<\/th>\n      <th>runtimeMinutes<\/th>\n      <th>genres<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[6,7,8]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"tconst","targets":1},{"name":"titleType","targets":2},{"name":"primaryTitle","targets":3},{"name":"originalTitle","targets":4},{"name":"isAdult","targets":5},{"name":"startYear","targets":6},{"name":"endYear","targets":7},{"name":"runtimeMinutes","targets":8},{"name":"genres","targets":9}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Indeed all of these movie and tv shows are heavily acclaimed and widely known across the country and the world. One could argue that these are the top respective Movies and Tv Shows of all time.</p>
<p>Next let’s check bad movies with a significant amount of votes.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>TITLE_RATINGS <span class="sc">|&gt;</span> </span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(numVotes <span class="sc">&gt;</span> <span class="dv">50000</span>, success <span class="sc">&lt;</span> <span class="dv">8</span>) <span class="sc">|&gt;</span> </span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(success) <span class="sc">|&gt;</span> </span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  DT<span class="sc">::</span><span class="fu">datatable</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-c5b8bc7092731c7a639b" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-c5b8bc7092731c7a639b">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20"],["tt5988370","tt27528139","tt7886848","tt14153790","tt1702443","tt7668842","tt1213644","tt0362165","tt10888594","tt10350922","tt0299930","tt1098327","tt0185183","tt0799949","tt2574698","tt5697572","tt0466342","tt0093300","tt12915716","tt1073498"],[1,1.2,1.2,1.6,1.7,2,1.9,2.3,1.9,2.5,2.6,2.5,2.5,2.4,2.7,2.8,2.8,3,2.7,2.8],[74161,86297,96849,79415,76472,56195,95326,60074,180253,59030,51173,80250,83867,110333,60500,56682,62642,50639,134430,112343],[5.870175577279292,6.135995698309741,6.186095140834954,6.499902540235212,6.583502448598836,6.749697675551072,6.879211369856581,7.07868655021091,7.155882501533512,7.271072783221195,7.309040878087115,7.40444504107691,7.42359110818083,7.442705426986153,7.481755374652469,7.553445165739849,7.596865615191294,7.704485120809259,7.828496198632706,7.850546017065933]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>tconst<\/th>\n      <th>averageRating<\/th>\n      <th>numVotes<\/th>\n      <th>success<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[2,3,4]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"tconst","targets":1},{"name":"averageRating","targets":2},{"name":"numVotes","targets":3},{"name":"success","targets":4}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Indeed, these score quite poorly. Keep in mind that this metric because it is log transformed, the lowest movies in success are around 3, and peaks around 15.8.</p>
<p>Now lets take a look at my favorite director, Christopher Nolan, and see how his projects fare using our metric.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co">#NAME_BASICS |&gt; </span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="co">#  filter(primaryName == "Christopher Nolan")</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>TITLE_RATINGS <span class="sc">|&gt;</span> </span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(tconst <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"tt6723592"</span>,<span class="st">"tt0816692"</span>,<span class="st">"tt1375666"</span>,<span class="st">"tt0482571"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>  DT<span class="sc">::</span><span class="fu">datatable</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-e7022fa8bc647c80a3e6" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-e7022fa8bc647c80a3e6">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4"],["tt0482571","tt0816692","tt1375666","tt6723592"],[8.5,8.699999999999999,8.800000000000001,7.3],[1472193,2179321,2605397,609389],[14.66796474841219,15.03832120374841,15.21587390873831,13.08489461056533]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>tconst<\/th>\n      <th>averageRating<\/th>\n      <th>numVotes<\/th>\n      <th>success<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[2,3,4]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"tconst","targets":1},{"name":"averageRating","targets":2},{"name":"numVotes","targets":3},{"name":"success","targets":4}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Indeed his famous movies are some of the all time greats, and score significantly well on our success metric. Finally, I thought it would be fun to take a look at The Room. This movie is famously one of the best “worst movies” and has garnered a cult following. Because of that, it should have poor average rating but alot of votes which will help test the robustness of our metric.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co">#TITLE_BASICS |&gt; </span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="co">#  filter(primaryTitle == "The Room")</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>TITLE_RATINGS <span class="sc">|&gt;</span> </span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(tconst <span class="sc">==</span> <span class="st">"tt0368226"</span>)  <span class="sc">|&gt;</span> </span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>  DT<span class="sc">::</span><span class="fu">datatable</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-1072266ca7fabfdc2665" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-1072266ca7fabfdc2665">{"x":{"filter":"none","vertical":false,"data":[["1"],["tt0368226"],[3.6],[96339],[8.58380213401977]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>tconst<\/th>\n      <th>averageRating<\/th>\n      <th>numVotes<\/th>\n      <th>success<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[2,3,4]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"tconst","targets":1},{"name":"averageRating","targets":2},{"name":"numVotes","targets":3},{"name":"success","targets":4}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>And it indeed does not score well despite it being a popular film to review. Though it has some success to take credit for considering its cult following, which is exactly what our metric aims to capture.</p>
<p>Given that our metric is effective, let’s determine what score could be considered a success on our metric.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>TITLE_RATINGS <span class="sc">|&gt;</span> </span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(success)) <span class="sc">+</span> </span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_function</span>(</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">fun =</span> dnorm,</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">args =</span> <span class="fu">with</span>(TITLE_RATINGS, <span class="fu">c</span>(<span class="at">mean =</span> <span class="fu">mean</span>(success), <span class="at">sd =</span> <span class="fu">sd</span>(success)))</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span> <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mp02_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Plotting a normal distribution of our metric, we can see the mean lies just below 10. So I think classifying a movie as a success as 10 and up would qualify as <strong>solid</strong> or better.</p>
</section>
</section>
<section id="task-4" class="level2">
<h2 class="anchored" data-anchor-id="task-4">Task 4</h2>
<p>Now that we have a measure for success, lets analyze trends over genre and decade.</p>
<section id="most-successes-for-decade" class="level3">
<h3 class="anchored" data-anchor-id="most-successes-for-decade">Most Successes for Decade</h3>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>titles <span class="ot">&lt;-</span> <span class="fu">inner_join</span>(TITLE_RATINGS, <span class="fu">separate_longer_delim</span>(TITLE_BASICS, genres, <span class="st">","</span>), <span class="at">by =</span> <span class="st">"tconst"</span>)</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>titles <span class="ot">&lt;-</span> <span class="fu">filter</span>(titles, titleType <span class="sc">==</span> <span class="st">"movie"</span>)</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>titles <span class="sc">|&gt;</span> </span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">decade =</span> <span class="fu">signif</span>(startYear, <span class="dv">3</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(success <span class="sc">&gt;=</span> <span class="dv">10</span>) <span class="sc">|&gt;</span> </span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(decade, genres) <span class="sc">|&gt;</span> </span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">successes =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span> </span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(successes)) <span class="sc">|&gt;</span> </span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(decade, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>  DT<span class="sc">::</span><span class="fu">datatable</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-27de1c523c4f05b76e1e" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-27de1c523c4f05b76e1e">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13"],[2010,2000,2020,1990,1980,1960,1970,1950,1940,1930,1920,1910,null],["Drama","Drama","Drama","Drama","Drama","Drama","Drama","Drama","Drama","Drama","Drama","Drama","Action"],[3463,2680,2660,1354,1164,987,954,565,398,224,57,6,1]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>decade<\/th>\n      <th>genres<\/th>\n      <th>successes<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[1,3]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"decade","targets":1},{"name":"genres","targets":2},{"name":"successes","targets":3}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>The most successes for every decade it seems is Drama. Note that in order to condense the genres, we had to delimit the genres that were separated by commas into multiple entries. So a single movie can have multiple genre entries, like a Romantic Comedy for example. This might have an influence on why Dramas are so prevalent as an umbrella genre.</p>
</section>
<section id="genres-over-time" class="level3">
<h3 class="anchored" data-anchor-id="genres-over-time">Genres over Time</h3>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>titles <span class="sc">|&gt;</span> </span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">decade =</span> <span class="fu">signif</span>(startYear, <span class="dv">3</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(success <span class="sc">&gt;=</span> <span class="dv">10</span>) <span class="sc">|&gt;</span> </span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(decade, genres) <span class="sc">|&gt;</span> </span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">successes =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span> </span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(genres) <span class="sc">|&gt;</span> </span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(genres <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Action"</span>, <span class="st">"Drama"</span>, <span class="st">"Romance"</span>, <span class="st">"Documentary"</span>, <span class="st">"Comedy"</span>, <span class="st">"Western"</span>, <span class="st">"Biography"</span>, <span class="st">"History"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(decade, successes)) <span class="sc">+</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">color =</span> genres))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mp02_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>When looking at how genres perform over time, I think it makes sense to focus on some of the most prominent genres as putting everything on a graph will be overly cluttered and hard to read. Given that, we can see that Drams for sure have consistently put out the most successes. While Romance movies used to be a lot more prominent in the 1900s but have considerably fallen out of favor after the turn of the century.</p>
<p>When you take a look at Documentaries, that genre has become a lot more popular as of recently. They really weren’t popular but saw a quick rise at the turn of the century and quickly ascended to the 3rd most popular genre.</p>
</section>
<section id="success-after-2010" class="level3">
<h3 class="anchored" data-anchor-id="success-after-2010">Success after 2010</h3>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>titles <span class="ot">&lt;-</span> titles <span class="sc">|&gt;</span> </span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">decade =</span> <span class="fu">signif</span>(startYear, <span class="dv">3</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">threshold =</span> <span class="fu">ifelse</span>(success <span class="sc">&gt;=</span> <span class="dv">10</span>, <span class="dv">1</span>, <span class="dv">0</span>))</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>titles <span class="sc">|&gt;</span> </span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(startYear <span class="sc">&gt;=</span> <span class="dv">2010</span>) <span class="sc">|&gt;</span> </span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(genres) <span class="sc">|&gt;</span> </span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">successes =</span> <span class="fu">sum</span>(threshold),</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>            <span class="at">ratio =</span> <span class="fu">sum</span>(threshold) <span class="sc">/</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span> </span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(successes)) <span class="sc">|&gt;</span> </span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(successes, genres)) <span class="sc">+</span> </span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mp02_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>titles <span class="sc">|&gt;</span> </span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(startYear <span class="sc">&gt;=</span> <span class="dv">2010</span>) <span class="sc">|&gt;</span> </span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(genres) <span class="sc">|&gt;</span> </span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">successes =</span> <span class="fu">sum</span>(threshold),</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">ratio =</span> <span class="fu">sum</span>(threshold) <span class="sc">/</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span> </span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(successes)) <span class="sc">|&gt;</span> </span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(ratio, genres)) <span class="sc">+</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mp02_files/figure-html/unnamed-chunk-18-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Disregarding the NA column, its no surprise given our previous graphic that Dramas contain the largest amount of successes by sheer volume. However, if we take a look at what percentage in each genre is a success we get a better understanding of what actually performs best. Talk-Show has the best ratio but the small sample size makes it tough to look at seriously. We can see that next to it, Biographies perform exceptionally well, while also having a moderate but respectable success count.</p>
<p>Given Biographies success and less competition, it seems like a great genre to design a movie concept around.</p>
</section>
</section>
<section id="task-5---the-dream-cast" class="level2">
<h2 class="anchored" data-anchor-id="task-5---the-dream-cast">Task 5 - The Dream Cast</h2>
<section id="a-famous-duo" class="level3">
<h3 class="anchored" data-anchor-id="a-famous-duo">A Famous Duo</h3>
<p>For our movie I suggest we go with the prolific director-actor combo of Christopher Nolan and Christian Bale. Not only have the individually contributed to some of the best movies of all time, they also have collaborated on multiple together, producing some of the top movies of all time. To illustrate this point lets see how their movies where they both appear as director and actor fair against the average movie.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>success_summary <span class="ot">&lt;-</span> <span class="fu">summary</span>(titles<span class="sc">$</span>success)</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>avg_success <span class="ot">&lt;-</span> <span class="fu">data_frame</span>(<span class="at">primaryTitle =</span> <span class="st">"Average Movie"</span>, <span class="at">success =</span> success_summary[<span class="dv">3</span>])</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>titles <span class="sc">|&gt;</span> </span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(tconst <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"tt0482571"</span>, <span class="st">"tt0372784"</span>, <span class="st">"tt0468569"</span>, <span class="st">"tt1345836"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(tconst, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(primaryTitle, success)) <span class="sc">+</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">fill =</span> <span class="st">"red4"</span>) <span class="sc">+</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">data =</span> avg_success, <span class="at">fill =</span> <span class="st">"blue"</span>) <span class="sc">+</span></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">16</span>)) <span class="sc">+</span></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_discrete</span>(<span class="at">guide =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Partnership of Christian Bale and Christopher Nolan"</span>) <span class="sc">+</span></span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mp02_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>As we can see, their movies are in an elite club as some of the best movies of all time.</p>
</section>
<section id="a-killer-biography" class="level3">
<h3 class="anchored" data-anchor-id="a-killer-biography">A Killer Biography</h3>
<p>We established before that the genre we would like to target is a Biography, a hot genre that is performing exceptionally well these days while not being over-saturated. Especially coming off the great success of Oppenheimer, Nolan would be a great pick for this movie. He proved at least with Oppenheimer how effective he can be at historical storytelling. Christian Bale is a prolific actor who has tackled many roles and certainly would be up for any challenge.</p>
<p>Lets see which Biographies have performed the best.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>titles <span class="sc">|&gt;</span> </span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(genres <span class="sc">==</span> <span class="st">"Biography"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(success)) <span class="sc">|&gt;</span> </span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="at">n =</span> <span class="dv">50</span>) <span class="sc">|&gt;</span> </span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>  DT<span class="sc">::</span><span class="fu">datatable</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-100b1ce1f4be06e86254" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-100b1ce1f4be06e86254">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50"],["tt0108052","tt0099685","tt0253474","tt0993846","tt0112573","tt15398776","tt0268978","tt0264464","tt0086879","tt2024544","tt0758758","tt2084970","tt23849204","tt2119532","tt1504320","tt1979320","tt1895587","tt0056172","tt1950186","tt0363163","tt0454921","tt1285016","tt0081398","tt1727824","tt0395169","tt0790636","tt0080678","tt1028532","tt0059742","tt1024648","tt1535109","tt1596363","tt0765429","tt1302006","tt0072890","tt10295212","tt3741834","tt0964517","tt1424432","tt2980516","tt0083987","tt0107207","tt1220719","tt0064115","tt0352248","tt1210166","tt0358273","tt0119008","tt0210945","tt0878804"],[9,8.699999999999999,8.5,8.199999999999999,8.300000000000001,8.300000000000001,8.199999999999999,8.1,8.4,8.1,8.1,8,8.800000000000001,8.1,8,8.1,8.1,8.300000000000001,8.1,8.199999999999999,8,7.8,8.1,7.9,8.1,7.9,8.199999999999999,8.1,8.1,7.7,7.8,7.8,7.8,7.8,8,8.300000000000001,8,7.8,8.5,7.7,8,8.1,8,8,8,7.6,7.8,7.7,7.8,7.6],[1481971,1285879,935420,1627553,1107609,807568,1002470,1125422,436359,751420,667056,837722,131930,613653,714169,522662,509113,320975,498484,380646,574360,772881,386436,606817,377572,526231,262953,318579,266900,645286,499670,496393,461285,440722,277333,131022,254908,393465,77895,487852,241768,190810,235820,229144,200897,474687,269491,337886,236021,366407],[15.1708397052201,14.80920010381008,14.47100665122224,14.41153513993317,14.34438647599594,14.20717910163024,14.20107138475416,14.15131540058625,14.03984393781398,13.97588275018177,13.9241622948912,13.92309992090156,13.92034356243803,13.88792286171915,13.85380099480505,13.81822092598214,13.80681418671752,13.80647120752991,13.79765122318283,13.78052127039084,13.75918418683283,13.68811263101821,13.6870775780775,13.6830577390606,13.67699978039199,13.62117642856986,13.61987812999265,13.60321714470835,13.52634857378751,13.50975224284042,13.49868327534698,13.4958256485664,13.4639693325117,13.44416473020161,13.44300154958219,13.4173442244833,13.40638346552551,13.3949061064971,13.39150958165074,13.38828808976501,13.38339881785188,13.38060113153691,13.37258063503091,13.36010848998575,13.30297345146615,13.2764073380896,13.23054426593981,13.22877019754966,13.1729506460988,13.16396376202729],["movie","movie","movie","movie","movie","movie","movie","movie","movie","movie","movie","movie","movie","movie","movie","movie","movie","movie","movie","movie","movie","movie","movie","movie","movie","movie","movie","movie","movie","movie","movie","movie","movie","movie","movie","movie","movie","movie","movie","movie","movie","movie","movie","movie","movie","movie","movie","movie","movie","movie"],["Schindler's List","Goodfellas","The Pianist","The Wolf of Wall Street","Braveheart","Oppenheimer","A Beautiful Mind","Catch Me If You Can","Amadeus","12 Years a Slave","Into the Wild","The Imitation Game","12th Fail","Hacksaw Ridge","The King's Speech","Rush","Spotlight","Lawrence of Arabia","Ford v Ferrari","Downfall","The Pursuit of Happyness","The Social Network","Raging Bull","Bohemian Rhapsody","Hotel Rwanda","Dallas Buyers Club","The Elephant Man","Hachi: A Dog's Tale","The Sound of Music","Argo","Captain Phillips","The Big Short","American Gangster","The Irishman","Dog Day Afternoon","Shershaah","Lion","The Fighter","Senna","The Theory of Everything","Gandhi","In the Name of the Father","Ip Man","Butch Cassidy and the Sundance Kid","Cinderella Man","Moneyball","Walk the Line","Donnie Brasco","Remember the Titans","The Blind Side"],["Schindler's List","Goodfellas","The Pianist","The Wolf of Wall Street","Braveheart","Oppenheimer","A Beautiful Mind","Catch Me If You Can","Amadeus","12 Years a Slave","Into the Wild","The Imitation Game","12th Fail","Hacksaw Ridge","The King's Speech","Rush","Spotlight","Lawrence of Arabia","Ford v Ferrari","Der Untergang","The Pursuit of Happyness","The Social Network","Raging Bull","Bohemian Rhapsody","Hotel Rwanda","Dallas Buyers Club","The Elephant Man","Hachi: A Dog's Tale","The Sound of Music","Argo","Captain Phillips","The Big Short","American Gangster","The Irishman","Dog Day Afternoon","Shershaah","Lion","The Fighter","Senna","The Theory of Everything","Gandhi","In the Name of the Father","Ip Man","Butch Cassidy and the Sundance Kid","Cinderella Man","Moneyball","Walk the Line","Donnie Brasco","Remember the Titans","The Blind Side"],[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false],[1993,1990,2002,2013,1995,2023,2001,2002,1984,2013,2007,2014,2023,2016,2010,2013,2015,1962,2019,2004,2006,2010,1980,2018,2004,2013,1980,2009,1965,2012,2013,2015,2007,2019,1975,2021,2016,2010,2010,2014,1982,1993,2008,1969,2005,2011,2005,1997,2000,2009],[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],[195,145,150,180,178,180,135,141,160,134,148,114,147,139,118,123,129,227,152,156,117,120,129,134,121,117,124,93,172,120,134,130,157,209,125,135,118,116,106,123,191,133,106,110,144,133,136,127,113,129],["Biography","Biography","Biography","Biography","Biography","Biography","Biography","Biography","Biography","Biography","Biography","Biography","Biography","Biography","Biography","Biography","Biography","Biography","Biography","Biography","Biography","Biography","Biography","Biography","Biography","Biography","Biography","Biography","Biography","Biography","Biography","Biography","Biography","Biography","Biography","Biography","Biography","Biography","Biography","Biography","Biography","Biography","Biography","Biography","Biography","Biography","Biography","Biography","Biography","Biography"],[1990,1990,2000,2010,2000,2020,2000,2000,1980,2010,2010,2010,2020,2020,2010,2010,2020,1960,2020,2000,2010,2010,1980,2020,2000,2010,1980,2010,1960,2010,2010,2020,2010,2020,1980,2020,2020,2010,2010,2010,1980,1990,2010,1970,2000,2010,2000,2000,2000,2010],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>tconst<\/th>\n      <th>averageRating<\/th>\n      <th>numVotes<\/th>\n      <th>success<\/th>\n      <th>titleType<\/th>\n      <th>primaryTitle<\/th>\n      <th>originalTitle<\/th>\n      <th>isAdult<\/th>\n      <th>startYear<\/th>\n      <th>endYear<\/th>\n      <th>runtimeMinutes<\/th>\n      <th>genres<\/th>\n      <th>decade<\/th>\n      <th>threshold<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[2,3,4,9,10,11,13,14]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"tconst","targets":1},{"name":"averageRating","targets":2},{"name":"numVotes","targets":3},{"name":"success","targets":4},{"name":"titleType","targets":5},{"name":"primaryTitle","targets":6},{"name":"originalTitle","targets":7},{"name":"isAdult","targets":8},{"name":"startYear","targets":9},{"name":"endYear","targets":10},{"name":"runtimeMinutes","targets":11},{"name":"genres","targets":12},{"name":"decade","targets":13},{"name":"threshold","targets":14}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Two movie that stick out to me are Goodfellas and The Wolf of Wall Street. Both excellent movies. they also feature the same lead, Leonardo Dicaprio, who I think would also be a great fit for this project. We already see how successful his Biography movies are, so he would be a great addition to our team. We can see his success through his best known movies.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>titles <span class="sc">|&gt;</span> </span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(tconst <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"tt1375666"</span>,<span class="st">"tt0407887"</span>,<span class="st">"tt0120338"</span>,<span class="st">"tt0993846"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(tconst, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>  DT<span class="sc">::</span><span class="fu">datatable</span>(</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">"Leonardo DiCaprio's Feature Films"</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-f949bac1bf802ab8ed52" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-f949bac1bf802ab8ed52">{"x":{"filter":"none","vertical":false,"caption":"<caption>Leonardo DiCaprio's Feature Films<\/caption>","data":[["1","2","3","4"],["tt0120338","tt0407887","tt0993846","tt1375666"],[7.9,8.5,8.199999999999999,8.800000000000001],[1309446,1449409,1627553,2605397],[14.01708759334118,14.6611909537107,14.41153513993317,15.21587390873831],["movie","movie","movie","movie"],["Titanic","The Departed","The Wolf of Wall Street","Inception"],["Titanic","The Departed","The Wolf of Wall Street","Inception"],[false,false,false,false],[1997,2006,2013,2010],[null,null,null,null],[194,151,180,148],["Drama","Crime","Biography","Action"],[2000,2010,2010,2010],[1,1,1,1]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>tconst<\/th>\n      <th>averageRating<\/th>\n      <th>numVotes<\/th>\n      <th>success<\/th>\n      <th>titleType<\/th>\n      <th>primaryTitle<\/th>\n      <th>originalTitle<\/th>\n      <th>isAdult<\/th>\n      <th>startYear<\/th>\n      <th>endYear<\/th>\n      <th>runtimeMinutes<\/th>\n      <th>genres<\/th>\n      <th>decade<\/th>\n      <th>threshold<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[2,3,4,9,10,11,13,14]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"tconst","targets":1},{"name":"averageRating","targets":2},{"name":"numVotes","targets":3},{"name":"success","targets":4},{"name":"titleType","targets":5},{"name":"primaryTitle","targets":6},{"name":"originalTitle","targets":7},{"name":"isAdult","targets":8},{"name":"startYear","targets":9},{"name":"endYear","targets":10},{"name":"runtimeMinutes","targets":11},{"name":"genres","targets":12},{"name":"decade","targets":13},{"name":"threshold","targets":14}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>As we can see, he is an extremely accomplished actor with previous success leading BioPics and is a great fit for this project.</p>
</section>
</section>
<section id="task-6---time-for-a-remake" class="level2">
<h2 class="anchored" data-anchor-id="task-6---time-for-a-remake">Task 6 - Time for a Remake?</h2>
<p>When looking at the top Biographies, a great candidate for a remake stood out to me: Spartacus. This classic from 1960 has been begging to be remade and now is the time! Unfortunately the great Stanley Kubrick who directed is no longer alive, neither is the original writers or actors so we will have to go in with an all new cast. That’s all right as we have selected an all-star crew to lead our new vision of Spartacus for a modern audience.</p>
</section>
<section id="task-7---the-ultimate-movie-pitch" class="level2">
<h2 class="anchored" data-anchor-id="task-7---the-ultimate-movie-pitch">Task 7 - The Ultimate Movie Pitch</h2>
<p>Spartacus, an all time Kubrick classic from 1960, is ready to be remade. A winner of the Best Picture award in 1960, this BioPic about a slave rebellion would certainly see considerable success today. An underdog story about slaves rebelling against their masters would sell great with audiences especially today with the heightened sense of justice within modern American society.</p>
<p>BioPics have been the most successful movie genre by a significant margin for the last decade, while remaining underutilized in the market with a lot of untapped potential. Coming off the heels off the extremely successful BioPic, Oppenheimer, we can think of no better director then Christopher Nolan to lead this project. Nolan, one of the most successful directors of our generation has enjoyed considerable box office success. Alongside him, Christian Bale who has partnered with Nolan multiple times in the past will be one of the featured actors of this film. Bale together with Nolan have been in arguably some of the greatest movies of all time and it is time for them to reunite again once more. Rounding out the crew will be Leonardo DiCaprio, who has already featured in all time great BioPics like the Wolf of Wall Street and Goodfellas. With this all-star team and proven track record, this movie is due to break the box office.</p>
<p>Here is a quick trailer snippet to get you excited for this future blockbuster film:</p>
<p>From director Christopher Nolan, the visionary mind between Oppenheimer; and From actor Christian Bale, beloved star of the Batman Trilogy; and From actor Leonardo DiCaprio, Hollywood icon of the Biography genre , Comes the timeless tail Spartacus A story of heorism, defiance, and tragedy. Coming soon to a theater near you.</p>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>